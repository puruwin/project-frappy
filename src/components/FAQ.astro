---
interface Props {
  question: string;
  answer: string;
}

const { question, answer } = Astro.props;
---

<div class="faq-item mb-6">
  <button
    class="font-['Montserrat_Variable'] flex w-full items-center justify-between bg-white p-4 sm:p-5 text-left text-sm sm:text-base transition-all duration-300 rounded-lg hover:bg-gray-50"
  >
    <span class="pr-4 font-medium text-[var(--color-text)]">{question}</span>
    <span class="transform transition-transform duration-300 text-xl sm:text-2xl flex-shrink-0 text-[var(--color-text-offset)] h-8 w-8 flex items-center justify-center rounded-full">+</span>
  </button>
  <div
    class="answer hidden bg-white p-4 sm:p-6 font-['Montserrat_Variable'] leading-relaxed text-sm sm:text-base text-[var(--color-text)] opacity-80 mt-2 rounded-lg"
  >
    {answer}
  </div>
</div>

<script>
  document.querySelectorAll(".faq-item button").forEach((button) => {
    button.addEventListener("click", () => {
      const faqItem = button.closest('.faq-item');
      const answer = button.nextElementSibling;
      const plusSign = button.querySelector("span:last-child") as HTMLElement;
      
      // Cerrar todas las otras preguntas
      document.querySelectorAll('.faq-item').forEach((item) => {
        if (item !== faqItem) {
          const otherAnswer = item.querySelector('.answer');
          const otherPlusSign = item.querySelector("button span:last-child") as HTMLElement;
          otherAnswer?.classList.add('hidden');
          if (otherPlusSign) {
            otherPlusSign.style.transform = 'rotate(0)';
            otherPlusSign.innerHTML = '+';
          }
        }
      });

      if (answer && plusSign) {
        answer.classList.toggle("hidden");
        const isHidden = answer.classList.contains("hidden");
        plusSign.style.transform = isHidden ? "rotate(0)" : "rotate(45deg)";
        plusSign.innerHTML = isHidden ? "+" : "Ã—";
        (button as HTMLElement).style.transform = isHidden ? "" : "translateY(-2px)";
      }
    });
  });
</script>

<style>
  .faq-item {
    border: 1px solid var(--color-border);
    border-radius: var(--radius-lg);
    transition: all 0.3s ease;
  }

  .faq-item:hover {
    box-shadow: var(--shadow-sm);
  }

  .faq-item button:focus {
    outline: 2px solid var(--color-text-offset);
    outline-offset: 2px;
  }
</style>

